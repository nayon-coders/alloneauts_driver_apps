import 'package:driver/Firebase/controller/wish_list_controller.dart';import 'package:driver/generated/assets.dart';import 'package:driver/utilitys/colors.dart';import 'package:driver/view/home/widgets/home_search.dart';import 'package:driver/widgets/car_list_view.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:flutter/material.dart';import '../../widgets/login-required.dart';import '../auth/login.dart';import '../single_car/single_cart.dart';class SaveCars extends StatefulWidget {  const SaveCars({Key? key}) : super(key: key);  @override  State<SaveCars> createState() => _SaveCarsState();}class _SaveCarsState extends State<SaveCars> {  final _searchController = TextEditingController();  @override  Widget build(BuildContext context) {    var size = MediaQuery.of(context).size;    return Container(      width: size.width,      height: size.height,      padding: EdgeInsets.all(20),      child: FirebaseAuth.instance.currentUser != null ? SingleChildScrollView(        child: Column(          mainAxisAlignment: MainAxisAlignment.start,          crossAxisAlignment: CrossAxisAlignment.start,          children: [            Text("My Favourite Cars",              style: TextStyle(                fontSize: 25,                fontWeight: FontWeight.w600,                color: AppColors.black              ),            ),            SizedBox(height: 20,),            StreamBuilder(              stream: WishListController.getWishList(),              builder: (context, snapshot) {                  if(snapshot.connectionState == ConnectionState.waiting){                    return Center(child: CircularProgressIndicator(),);                  }else if(snapshot.hasData){                    return  snapshot.data!.docs.length == 0                        ? Center(                          child: Text("No car found"),                        )                         :ListView.builder(                      shrinkWrap: true,                      physics: NeverScrollableScrollPhysics(),                      itemCount: snapshot.data!.docs.length,                      itemBuilder: (_, index){                        var data = snapshot.data!.docs[index].data();                        return CarListView(                          size: size,                          data: data, ///TODO add data                          carId: data["car_info"]["car_id"], ///TODO add carId for wishlist                          onClick: ()=>Navigator.push(context, MaterialPageRoute(builder: (context)=> SingleCar(singleCar: snapshot.data!.docs[index], ))),                          image: data["car_info"]["images"]["carImage"],                          name: data["car_info"]["name"],                          amount: data["car_info"]["price"],                          rentReviews: "0",                          totalReviews: "0",                          rentVeriant: data["car_info"]["rent_type"],                          onAddFav: (){},                        );                      },                    );                  }else{                    return Center(child: Text("No car found"),);                  }              }            )          ],        )      ) : LoginRequired(text: "To save car you need to login first.",),    );  }}